# =============================================================================
# Grafana Configuration
# =============================================================================
# Auto-generated by Ansible - roles/logging
# Do not edit manually - changes will be overwritten

[server]
protocol = http
http_port = {{ grafana_http_port }}
domain = {{ grafana_domain }}
root_url = https://%(domain)s/
serve_from_sub_path = {{ grafana_serve_from_subpath | lower }}

[security]
admin_user = {{ grafana_admin_user }}
disable_gravatar = {{ grafana_disable_gravatar | lower }}
# Cookie settings
cookie_secure = true
cookie_samesite = lax

[users]
allow_sign_up = {{ grafana_allow_signup | lower }}
auto_assign_org = true
auto_assign_org_role = Viewer

[auth]
disable_login_form = {{ grafana_disable_login_form | lower }}
oauth_auto_login = false

{% if grafana_oidc_enabled %}
[auth.generic_oauth]
enabled = true
name = {{ grafana_oidc_name }}
allow_sign_up = {{ grafana_oidc_allow_signup | lower }}
scopes = {{ grafana_oidc_scopes }}
auth_url = {{ grafana_oidc_auth_url }}
token_url = {{ grafana_oidc_token_url }}
api_url = {{ grafana_oidc_api_url }}
role_attribute_path = {{ grafana_oidc_role_attribute_path }}
{% endif %}

[log]
mode = console
level = warn

[log.console]
format = json

[analytics]
reporting_enabled = {{ grafana_reporting_enabled | lower }}
check_for_updates = {{ grafana_check_for_updates | lower }}

[dashboards]
default_home_dashboard_path = /var/lib/grafana/dashboards/system-overview.json

[paths]
data = /var/lib/grafana
logs = /var/log/grafana
plugins = /var/lib/grafana/plugins
provisioning = /etc/grafana/provisioning
