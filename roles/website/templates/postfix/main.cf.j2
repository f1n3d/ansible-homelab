# {{ ansible_managed }}
# Postfix Send-only Configuration (GMX Relay)

# Basic settings
smtpd_banner = $myhostname ESMTP
biff = no
append_dot_mydomain = no
readme_directory = no
compatibility_level = 3.6

# Hostname
myhostname = {{ postfix_hostname }}
mydomain = {{ postfix_hostname }}
myorigin = $mydomain

# Network settings - localhost only (send-only)
inet_interfaces = loopback-only
inet_protocols = ipv4

# Relay configuration
relayhost = {{ postfix_relay_host }}

# SASL authentication for GMX relay
smtp_sasl_auth_enable = yes
smtp_sasl_security_options = noanonymous
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd

# TLS settings
smtp_tls_security_level = encrypt
smtp_tls_CAfile = /etc/ssl/certs/ca-certificates.crt

# Sender rewriting
sender_canonical_maps = hash:/etc/postfix/sender_canonical

# Local delivery settings
mydestination = localhost
alias_maps = hash:/etc/aliases
alias_database = hash:/etc/aliases

# Queue settings
maximal_queue_lifetime = 1d
bounce_queue_lifetime = 1d

# Size limits
message_size_limit = 10240000
mailbox_size_limit = 0
